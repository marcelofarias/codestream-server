#!/bin/bash

# refresh everything

[ -z "$KM_PKI" ] && echo "Set KM_PKI to the location of the PKI database" && exit 1
binDir=`dirname $0`
repoRoot=`dirname $binDir`

echo $binDir/process-profile --show-desc --out $repoRoot/README.parameter-definitions.json
$binDir/process-profile --show-desc --out $repoRoot/README.parameter-definitions.json
echo $binDir/process-profile --show-env --out $repoRoot/README.parameter-environment-overrides.json
$binDir/process-profile --show-env --out $repoRoot/README.parameter-environment-overrides.json

echo -n "Update ~/src/onprem-install/config-templates/single-host-preview-minimal-cfg.json.template (y/N)? "
read ans
if [ "$ans" == y ]; then
	echo $binDir/process-profile --profile $repoRoot/profiles/onprem-single-host-preview-template.json --out ~/src/onprem-install/config-templates/single-host-preview-minimal-cfg.json.template
	$binDir/process-profile --profile $repoRoot/profiles/onprem-single-host-preview-template.json --out ~/src/onprem-install/config-templates/single-host-preview-minimal-cfg.json.template
fi
